"use strict";exports.id=551,exports.ids=[551],exports.modules={82402:(e,s,a)=>{a.d(s,{Z:()=>i});var r=a(95344),t=a(95793),l=a(74507),o=a(51838),n=a(16212),d=a(89410);let i=({onChange:e,onRemove:s,value:a})=>(0,r.jsxs)("div",{children:[r.jsx("div",{className:"mb-4 flex flex-wrap items-center gap-4",children:a.map(e=>(0,r.jsxs)("div",{className:"relative w-[200px] h-[200px]",children:[r.jsx("div",{className:"absolute top-0 right-0 z-10",children:r.jsx(n.z,{type:"button",onClick:()=>s(e),size:"sm",className:"bg-red-1 text-white",children:r.jsx(l.Z,{className:"h-4 w-4"})})}),r.jsx(d.default,{src:e,alt:"collection",className:"object-cover rounded-lg",fill:!0})]},e))}),r.jsx(t.ZF,{uploadPreset:"ne1harij",onUpload:s=>{e(s.info.secure_url)},children:({open:e})=>(0,r.jsxs)(n.z,{type:"button",onClick:()=>e(),className:"bg-grey-1 text-white",children:[r.jsx(o.Z,{className:"h-4 w-4 mr-2"}),"Upload Image"]})})]})},10558:(e,s,a)=>{a.d(s,{Z:()=>t});var r=a(95344);let t=()=>r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full border-t-4 border-blue-500 border-solid h-12 w-12"})})},32551:(e,s,a)=>{a.r(s),a.d(s,{default:()=>Z});var r=a(95344),t=a(85453),l=a(60708),o=a(29709),n=a(8428),d=a(66868),i=a(16212),c=a(78767),m=a(92549),x=a(93601),u=a(82402),p=a(3729),f=a(44669),h=a(70011),g=a(88720),j=a(91626);let N=(0,g.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function y({className:e,variant:s,...a}){return r.jsx("div",{className:(0,j.cn)(N({variant:s}),e),...a})}var v=a(14513);let b=({placeholder:e,value:s,onChange:a,onRemove:t})=>{let[l,o]=(0,p.useState)(""),n=e=>{a(e),o("")};return(0,r.jsxs)(r.Fragment,{children:[r.jsx(m.I,{placeholder:e,value:l,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),n(l))}}),r.jsx("div",{className:"flex gap-1 flex-wrap mt-4",children:s.map((e,s)=>(0,r.jsxs)(y,{className:"bg-grey-1 text-white",children:[e,r.jsx("button",{className:"ml-1 rounded-full outline-none hover:bg-red-1",onClick:()=>t(e),type:"button",children:r.jsx(v.Z,{className:"h-3 w-3"})})]},s))})]})};var w=a(75505),z=a(28765),C=a(51667);C.fC,C.xz;let I=C.h_;C.x8;let R=p.forwardRef(({className:e,...s},a)=>r.jsx(C.aV,{ref:a,className:(0,j.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));R.displayName=C.aV.displayName,p.forwardRef(({className:e,children:s,...a},t)=>(0,r.jsxs)(I,{children:[r.jsx(R,{}),(0,r.jsxs)(C.VY,{ref:t,className:(0,j.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[s,(0,r.jsxs)(C.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(v.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]})).displayName=C.VY.displayName,p.forwardRef(({className:e,...s},a)=>r.jsx(C.Dx,{ref:a,className:(0,j.cn)("text-lg font-semibold leading-none tracking-tight",e),...s})).displayName=C.Dx.displayName,p.forwardRef(({className:e,...s},a)=>r.jsx(C.dk,{ref:a,className:(0,j.cn)("text-sm text-muted-foreground",e),...s})).displayName=C.dk.displayName;let k=p.forwardRef(({className:e,...s},a)=>r.jsx(w.mY,{ref:a,className:(0,j.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...s}));k.displayName=w.mY.displayName;let S=p.forwardRef(({className:e,...s},a)=>(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[r.jsx(z.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx(w.mY.Input,{ref:a,className:(0,j.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...s})]}));S.displayName=w.mY.Input.displayName,p.forwardRef(({className:e,...s},a)=>r.jsx(w.mY.List,{ref:a,className:(0,j.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...s})).displayName=w.mY.List.displayName,p.forwardRef((e,s)=>r.jsx(w.mY.Empty,{ref:s,className:"py-6 text-center text-sm",...e})).displayName=w.mY.Empty.displayName;let D=p.forwardRef(({className:e,...s},a)=>r.jsx(w.mY.Group,{ref:a,className:(0,j.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...s}));D.displayName=w.mY.Group.displayName,p.forwardRef(({className:e,...s},a)=>r.jsx(w.mY.Separator,{ref:a,className:(0,j.cn)("-mx-1 h-px bg-border",e),...s})).displayName=w.mY.Separator.displayName;let _=p.forwardRef(({className:e,...s},a)=>r.jsx(w.mY.Item,{ref:a,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s}));_.displayName=w.mY.Item.displayName;let G=({placeholder:e,collections:s,value:a,onChange:t,onRemove:l})=>{let o;let[n,d]=(0,p.useState)(""),[i,c]=(0,p.useState)(!1);o=0===a.length?[]:a.map(e=>s.find(s=>s._id===e));let m=s.filter(e=>!o.includes(e));return(0,r.jsxs)(k,{className:"overflow-visible bg-white",children:[(0,r.jsxs)("div",{className:"flex gap-1 flex-wrap border rounded-md",children:[o.map(e=>(0,r.jsxs)(y,{children:[e.title,r.jsx("button",{type:"button",className:"ml-1 hover:text-red-1",onClick:()=>l(e._id),children:r.jsx(v.Z,{className:"h-3 w-3"})})]},e._id)),r.jsx(S,{placeholder:e,value:n,onValueChange:d,onBlur:()=>c(!1),onFocus:()=>c(!0)})]}),r.jsx("div",{className:"relative mt-2",children:i&&r.jsx(D,{className:"absolute w-full z-30 top-0 overflow-auto border rounded-md shadow-md",children:m.map(e=>r.jsx(_,{onMouseDown:e=>e.preventDefault(),onSelect:()=>{t(e._id),d("")},className:"hover:bg-grey-2 cursor-pointer",children:e.title},e._id))})})]})};var Y=a(10558);let P=o.z.object({title:o.z.string().min(2).max(20),description:o.z.string().min(2).max(500).trim(),media:o.z.array(o.z.string()),category:o.z.string(),collections:o.z.array(o.z.string()),tags:o.z.array(o.z.string()),sizes:o.z.array(o.z.string()),colors:o.z.array(o.z.string()),price:o.z.coerce.number().min(.1),expense:o.z.coerce.number().min(.1)}),Z=({initialData:e})=>{let s=(0,n.useRouter)(),[a,o]=(0,p.useState)(!0),[g,j]=(0,p.useState)([]),N=async()=>{try{let e=await fetch("/api/collections",{method:"GET"}),s=await e.json();j(s),o(!1)}catch(e){console.log("[collections_GET]",e),f.ZP.error("Something went wrong! Please try again.")}};(0,p.useEffect)(()=>{N()},[]);let y=(0,l.cI)({resolver:(0,t.F)(P),defaultValues:e?{...e,collections:e.collections.map(e=>e._id)}:{title:"",description:"",media:[],category:"",collections:[],tags:[],sizes:[],colors:[],price:.1,expense:.1}}),v=e=>{"Enter"===e.key&&e.preventDefault()},w=async a=>{try{o(!0);let r=e?`/api/products/${e._id}`:"/api/products";(await fetch(r,{method:"POST",body:JSON.stringify(a)})).ok&&(o(!1),f.ZP.success(`Product ${e?"updated":"created"}`),window.location.href="/products",s.push("/products"))}catch(e){console.log("[products_POST]",e),f.ZP.error("Something went wrong! Please try again.")}};return a?r.jsx(Y.Z,{}):(0,r.jsxs)("div",{className:"p-10",children:[e?(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-heading2-bold",children:"Edit Product"}),r.jsx(h.Z,{id:e._id,item:"product"})]}):r.jsx("p",{className:"text-heading2-bold",children:"Create Product"}),r.jsx(d.Separator,{className:"bg-grey-1 mt-4 mb-7"}),r.jsx(c.l0,{...y,children:(0,r.jsxs)("form",{onSubmit:y.handleSubmit(w),className:"space-y-8",children:[r.jsx(c.Wi,{control:y.control,name:"title",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Title"}),r.jsx(c.NI,{children:r.jsx(m.I,{placeholder:"Title",...e,onKeyDown:v})}),r.jsx(c.zG,{className:"text-red-1"})]})}),r.jsx(c.Wi,{control:y.control,name:"description",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Description"}),r.jsx(c.NI,{children:r.jsx(x.g,{placeholder:"Description",...e,rows:5,onKeyDown:v})}),r.jsx(c.zG,{className:"text-red-1"})]})}),r.jsx(c.Wi,{control:y.control,name:"media",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Image"}),r.jsx(c.NI,{children:r.jsx(u.Z,{value:e.value,onChange:s=>e.onChange([...e.value,s]),onRemove:s=>e.onChange([...e.value.filter(e=>e!==s)])})}),r.jsx(c.zG,{className:"text-red-1"})]})}),(0,r.jsxs)("div",{className:"md:grid md:grid-cols-3 gap-8",children:[r.jsx(c.Wi,{control:y.control,name:"price",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Price ($)"}),r.jsx(c.NI,{children:r.jsx(m.I,{type:"number",placeholder:"Price",...e,onKeyDown:v})}),r.jsx(c.zG,{className:"text-red-1"})]})}),r.jsx(c.Wi,{control:y.control,name:"expense",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Expense ($)"}),r.jsx(c.NI,{children:r.jsx(m.I,{type:"number",placeholder:"Expense",...e,onKeyDown:v})}),r.jsx(c.zG,{className:"text-red-1"})]})}),r.jsx(c.Wi,{control:y.control,name:"category",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Category"}),r.jsx(c.NI,{children:r.jsx(m.I,{placeholder:"Category",...e,onKeyDown:v})}),r.jsx(c.zG,{className:"text-red-1"})]})}),r.jsx(c.Wi,{control:y.control,name:"tags",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Tags"}),r.jsx(c.NI,{children:r.jsx(b,{placeholder:"Tags",value:e.value,onChange:s=>e.onChange([...e.value,s]),onRemove:s=>e.onChange([...e.value.filter(e=>e!==s)])})}),r.jsx(c.zG,{className:"text-red-1"})]})}),g.length>0&&r.jsx(c.Wi,{control:y.control,name:"collections",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Collections"}),r.jsx(c.NI,{children:r.jsx(G,{placeholder:"Collections",collections:g,value:e.value,onChange:s=>e.onChange([...e.value,s]),onRemove:s=>e.onChange([...e.value.filter(e=>e!==s)])})}),r.jsx(c.zG,{className:"text-red-1"})]})}),r.jsx(c.Wi,{control:y.control,name:"colors",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Colors"}),r.jsx(c.NI,{children:r.jsx(b,{placeholder:"Colors",value:e.value,onChange:s=>e.onChange([...e.value,s]),onRemove:s=>e.onChange([...e.value.filter(e=>e!==s)])})}),r.jsx(c.zG,{className:"text-red-1"})]})}),r.jsx(c.Wi,{control:y.control,name:"sizes",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:"Sizes"}),r.jsx(c.NI,{children:r.jsx(b,{placeholder:"Sizes",value:e.value,onChange:s=>e.onChange([...e.value,s]),onRemove:s=>e.onChange([...e.value.filter(e=>e!==s)])})}),r.jsx(c.zG,{className:"text-red-1"})]})})]}),(0,r.jsxs)("div",{className:"flex gap-10",children:[r.jsx(i.z,{type:"submit",className:"bg-blue-1 text-white",children:"Submit"}),r.jsx(i.z,{type:"button",onClick:()=>s.push("/products"),className:"bg-blue-1 text-white",children:"Discard"})]})]})})]})}},78767:(e,s,a)=>{a.d(s,{l0:()=>m,NI:()=>j,Wi:()=>u,xJ:()=>h,lX:()=>g,zG:()=>N});var r=a(95344),t=a(3729),l=a(32751),o=a(60708),n=a(91626),d=a(14217);let i=(0,a(88720).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef(({className:e,...s},a)=>r.jsx(d.f,{ref:a,className:(0,n.cn)(i(),e),...s}));c.displayName=d.f.displayName;let m=o.RV,x=t.createContext({}),u=({...e})=>r.jsx(x.Provider,{value:{name:e.name},children:r.jsx(o.Qr,{...e})}),p=()=>{let e=t.useContext(x),s=t.useContext(f),{getFieldState:a,formState:r}=(0,o.Gc)(),l=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=s;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...l}},f=t.createContext({}),h=t.forwardRef(({className:e,...s},a)=>{let l=t.useId();return r.jsx(f.Provider,{value:{id:l},children:r.jsx("div",{ref:a,className:(0,n.cn)("space-y-2",e),...s})})});h.displayName="FormItem";let g=t.forwardRef(({className:e,...s},a)=>{let{error:t,formItemId:l}=p();return r.jsx(c,{ref:a,className:(0,n.cn)(t&&"text-destructive",e),htmlFor:l,...s})});g.displayName="FormLabel";let j=t.forwardRef(({...e},s)=>{let{error:a,formItemId:t,formDescriptionId:o,formMessageId:n}=p();return r.jsx(l.g7,{ref:s,id:t,"aria-describedby":a?`${o} ${n}`:`${o}`,"aria-invalid":!!a,...e})});j.displayName="FormControl",t.forwardRef(({className:e,...s},a)=>{let{formDescriptionId:t}=p();return r.jsx("p",{ref:a,id:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s})}).displayName="FormDescription";let N=t.forwardRef(({className:e,children:s,...a},t)=>{let{error:l,formMessageId:o}=p(),d=l?String(l?.message):s;return d?r.jsx("p",{ref:t,id:o,className:(0,n.cn)("text-sm font-medium text-destructive",e),...a,children:d}):null});N.displayName="FormMessage"},93601:(e,s,a)=>{a.d(s,{g:()=>o});var r=a(95344),t=a(3729),l=a(91626);let o=t.forwardRef(({className:e,...s},a)=>r.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));o.displayName="Textarea"}};