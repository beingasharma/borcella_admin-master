"use strict";(()=>{var e={};e.id=684,e.ids=[684],e.modules={11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},72254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},87561:e=>{e.exports=require("node:fs")},88849:e=>{e.exports=require("node:http")},22286:e=>{e.exports=require("node:https")},87503:e=>{e.exports=require("node:net")},49411:e=>{e.exports=require("node:path")},97742:e=>{e.exports=require("node:process")},84492:e=>{e.exports=require("node:stream")},72477:e=>{e.exports=require("node:stream/web")},41041:e=>{e.exports=require("node:url")},47261:e=>{e.exports=require("node:util")},65628:e=>{e.exports=require("node:zlib")},77282:e=>{e.exports=require("process")},71267:e=>{e.exports=require("worker_threads")},89399:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>S,patchFetch:()=>v,requestAsyncStorage:()=>y,routeModule:()=>x,serverHooks:()=>h,staticGenerationAsyncStorage:()=>q,staticGenerationBailout:()=>w});var o={};r.r(o),r.d(o,{GET:()=>m,POST:()=>l,dynamic:()=>g});var a=r(95419),s=r(69108),n=r(99678),i=r(93183),p=r(78070),c=r(18237),u=r(4385),d=r(25150);let l=async e=>{try{let{userId:t}=(0,i.I8)();if(!t)return new p.Z("Unauthorized",{status:401});await (0,c.P)();let{title:r,description:o,media:a,category:s,collections:n,tags:l,sizes:m,colors:g,price:x,expense:y}=await e.json();if(!r||!o||!a||!s||!x||!y)return new p.Z("Not enough data to create a product",{status:400});let q=await u.Z.create({title:r,description:o,media:a,category:s,collections:n,tags:l,sizes:m,colors:g,price:x,expense:y});if(await q.save(),n)for(let e of n){let t=await d.Z.findById(e);t&&(t.products.push(q._id),await t.save())}return p.Z.json(q,{status:200})}catch(e){return console.log("[products_POST]",e),new p.Z("Internal Error",{status:500})}},m=async e=>{try{await (0,c.P)();let e=await u.Z.find().sort({createdAt:"desc"}).populate({path:"collections",model:d.Z});return p.Z.json(e,{status:200})}catch(e){return console.log("[products_GET]",e),new p.Z("Internal Error",{status:500})}},g="force-dynamic",x=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"C:\\Users\\ASharma\\Documents\\New folder\\borcella_admin-master\\app\\api\\products\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:y,staticGenerationAsyncStorage:q,serverHooks:h,headerHooks:f,staticGenerationBailout:w}=x,S="/api/products/route";function v(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:q})}},25150:(e,t,r)=>{r.d(t,{Z:()=>n});var o=r(11185),a=r.n(o);let s=new(a()).Schema({title:{type:String,required:!0,unique:!0},description:String,image:{type:String,required:!0},products:[{type:a().Schema.Types.ObjectId,ref:"Product"}],createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}}),n=a().models.Collection||a().model("Collection",s)},4385:(e,t,r)=>{r.d(t,{Z:()=>n});var o=r(11185),a=r.n(o);let s=new(a()).Schema({title:String,description:String,media:[String],category:String,collections:[{type:a().Schema.Types.ObjectId,ref:"Collection"}],tags:[String],sizes:[String],colors:[String],price:{type:a().Schema.Types.Decimal128,get:e=>parseFloat(e.toString())},expense:{type:a().Schema.Types.Decimal128,get:e=>parseFloat(e.toString())},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}},{toJSON:{getters:!0}}),n=a().models.Product||a().model("Product",s)},18237:(e,t,r)=>{r.d(t,{P:()=>n});var o=r(11185),a=r.n(o);let s=!1,n=async()=>{if(a().set("strictQuery",!0),s){console.log("MongoDB is already connected");return}try{await a().connect(process.env.MONGODB_URL||"",{dbName:"Borcelle_Admin"}),s=!0,console.log("MongoDB is connected")}catch(e){console.log(e)}}},95419:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,70,183],()=>r(89399));module.exports=o})();