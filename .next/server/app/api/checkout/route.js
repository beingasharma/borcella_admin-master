"use strict";(()=>{var e={};e.id=607,e.ids=[607],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},73837:e=>{e.exports=require("util")},51883:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>E,originalPathname:()=>x,patchFetch:()=>A,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>_,staticGenerationBailout:()=>g});var o={};r.r(o),r.d(o,{OPTIONS:()=>p,POST:()=>l});var s=r(95419),a=r(69108),i=r(99678),n=r(78070),c=r(15922);let u={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"};async function p(){return n.Z.json({},{headers:u})}async function l(e){try{let{cartItems:t,customer:r}=await e.json();if(!t||!r)return new n.Z("Not enough data to checkout",{status:400});let o=await c.A.checkout.sessions.create({payment_method_types:["card"],mode:"payment",shipping_address_collection:{allowed_countries:["US","CA"]},shipping_options:[{shipping_rate:"shr_1PEibKSGMEg5m7x82lX0lcPd"},{shipping_rate:"shr_1PEiclSGMEg5m7x8XabzAi26"}],line_items:t.map(e=>({price_data:{currency:"cad",product_data:{name:e.item.title,metadata:{productId:e.item._id,...e.size&&{size:e.size},...e.color&&{color:e.color}}},unit_amount:100*e.item.price},quantity:e.quantity})),client_reference_id:r.clerkId,success_url:`${process.env.ECOMMERCE_STORE_URL}/payment_success`,cancel_url:`${process.env.ECOMMERCE_STORE_URL}/cart`});return n.Z.json(o,{headers:u})}catch(e){return console.log("[checkout_POST]",e),new n.Z("Internal Server Error",{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/checkout/route",pathname:"/api/checkout",filename:"route",bundlePath:"app/api/checkout/route"},resolvedPagePath:"C:\\Users\\ASharma\\Documents\\New folder\\borcella_admin-master\\app\\api\\checkout\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:_,serverHooks:m,headerHooks:E,staticGenerationBailout:g}=d,x="/api/checkout/route";function A(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:_})}},15922:(e,t,r)=>{r.d(t,{A:()=>o});let o=new(r(43443)).Z("sk_test_51KYwjcSGMEg5m7x8dDqpoi9FKGfZifU2TQpBUFF8u3gKXOE2FBVNklw6cXlZfCxw9hk2lgAj40xqrLt7TaT9K1IH00zPxF8FS4",{apiVersion:"2023-10-16",typescript:!0})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,70,952],()=>r(51883));module.exports=o})();