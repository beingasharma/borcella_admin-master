"use strict";(()=>{var e={};e.id=66,e.ids=[66],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},65359:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>S,originalPathname:()=>h,patchFetch:()=>w,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>y,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var o={};r.r(o),r.d(o,{GET:()=>u,dynamic:()=>l});var a=r(95419),n=r(69108),s=r(99678),d=r(4385),i=r(18237),c=r(78070);let u=async(e,{params:t})=>{try{await (0,i.P)();let e=await d.Z.findById(t.productId);if(!e)return new c.Z(JSON.stringify({message:"Product not found"}),{status:404});let r=await d.Z.find({$or:[{category:e.category},{collections:{$in:e.collections}}],_id:{$ne:e._id}});if(!r)return new c.Z(JSON.stringify({message:"No related products found"}),{status:404});return c.Z.json(r,{status:200})}catch(e){return console.log("[related_GET",e),new c.Z("Internal Server Error",{status:500})}},l="force-dynamic",p=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/products/[productId]/related/route",pathname:"/api/products/[productId]/related",filename:"route",bundlePath:"app/api/products/[productId]/related/route"},resolvedPagePath:"C:\\Users\\ASharma\\Documents\\New folder\\borcella_admin-master\\app\\api\\products\\[productId]\\related\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:y,headerHooks:S,staticGenerationBailout:f}=p,h="/api/products/[productId]/related/route";function w(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:m})}},4385:(e,t,r)=>{r.d(t,{Z:()=>s});var o=r(11185),a=r.n(o);let n=new(a()).Schema({title:String,description:String,media:[String],category:String,collections:[{type:a().Schema.Types.ObjectId,ref:"Collection"}],tags:[String],sizes:[String],colors:[String],price:{type:a().Schema.Types.Decimal128,get:e=>parseFloat(e.toString())},expense:{type:a().Schema.Types.Decimal128,get:e=>parseFloat(e.toString())},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}},{toJSON:{getters:!0}}),s=a().models.Product||a().model("Product",n)},18237:(e,t,r)=>{r.d(t,{P:()=>s});var o=r(11185),a=r.n(o);let n=!1,s=async()=>{if(a().set("strictQuery",!0),n){console.log("MongoDB is already connected");return}try{await a().connect(process.env.MONGODB_URL||"",{dbName:"Borcelle_Admin"}),n=!0,console.log("MongoDB is connected")}catch(e){console.log(e)}}},95419:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,70],()=>r(65359));module.exports=o})();